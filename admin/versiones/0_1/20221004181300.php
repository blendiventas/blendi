<?php
$result = $conn->query("DROP VIEW `articulos`;");
$result = $conn->query("CREATE VIEW articulos AS select `p`.`id` AS `Id articulo`,`p`.`descripcion` AS `articulos`,`u`.`abreviatura` AS `Unidad`,`p`.`peso_bruto` AS `Peso bruto`,`p`.`peso_neto` AS `Peso neto`,`p`.`coste` AS `Coste`, pcc.tiempo AS Tiempo,`t`.`descripcion` AS `Tarifa`,`pp`.`pvp` AS `PVP`,`pc`.`id_categoria` AS `ID_Categoria`,`c`.`descripcion` AS `Categoria` from ((((((`productos` `p` JOIN productos_costes pcc ON p.id = pcc.id_producto join `productos_unidades` `pu` on((`p`.`id` = `pu`.`id_producto`))) join `unidades` `u` on((`pu`.`id_unidad` = `u`.`id`))) join `productos_pvp` `pp` on((`pp`.`id_producto` = `p`.`id`))) join `tarifas` `t` on((`pp`.`id_tarifa` = `t`.`id`))) left join `productos_categorias` `pc` on((`p`.`id` = `pc`.`id_producto`))) left join `categorias` `c` on((`pc`.`id_categoria` = `c`.`id`))) where (`pu`.`principal` = 1) order by `p`.`descripcion`;");